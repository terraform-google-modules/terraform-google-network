---
{{- range $index, $rtbId := .Values.customerRtbIds }}
apiVersion: ec2.aws.upbound.io/v1beta2
kind: Route
metadata:
  name: {{ $.Values.customerName }}-route-{{ $index | add 1 | toString | lower }}
  annotations:
    meta.upbound.io/{{ $.Values.customerName }}: ec2/v1beta1/route
  labels:
    resource.upbound.io/{{ $.Values.customerName }}: Route
spec:
  forProvider:
    destinationCidrBlock: {{ $.Values.shootCidrBlock }}
    region: {{ $.Values.region }}
    vpcPeeringConnectionIdSelector:
      matchLabels:
        resource.upbound.io/{{ $.Values.customerName }}: VPCPeeringConnection
    routeTableId: {{ $rtbId.rtbId }}
  providerConfigRef:
    name: aws-provider-config
---
{{- end }}
